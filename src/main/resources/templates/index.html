<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Tacos Delivery - Inicio</title>
    <link rel="stylesheet" href="/index.css">
    <link rel="stylesheet" th:href="@{/footer.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
<header>
    <div class="logo">
        <img src="/static.images/LogoTacos.png" alt="Logo Tacos Delivery">
    </div>

    <nav>
        <a href="/index">Inicio</a>
        <a href="#nosotros">Nosotros</a>
        <a href="/menu">Menú</a>
        <a href="/carrito">Carrito</a>
    </nav>

    <!-- Mostrar icono solo si hay sesión -->
    <div class="perfil" id="perfilBtn">
        <img src="/static.images/user-iconv2.png" alt="Usuario">
    </div>
</header>

<section class="hero">
    <div class="hero-image">
        <img src="/static.images/BannerIndex.png" alt="Tacos deliciosos">
    </div>
    <div class="hero-text">
        <h2>DELICIOSOS TACOS</h2>
        <h3>SABOR AUTÉNTICO COLOMBIANO</h3>
        <p>Descubre nuestros tacos al pastor, asada y chorizo, preparados con los mejores ingredientes y el sazón que tanto te gusta.</p>
        <a href="/menu" class="btn-menu">Ver Menú y Ordenar</a>
    </div>
</section>

<!-- Modal que cambia según si el usuario ha iniciado sesión -->
<div id="logoutModal" class="modal">
    <div class="modal-content">
        <!-- Mostrar botón de CERRAR SESIÓN si está logueado -->
        <div th:if="${session.usuario != null}">
            <h3>¿Deseas cerrar sesión?</h3>
            <div class="modal-buttons">
                <button id="cancelBtn">Cancelar</button>
                <button id="logoutBtn">Cerrar sesión</button>
            </div>
        </div>

        <!-- Mostrar botón de IR AL LOGIN si NO está logueado -->
        <div th:if="${session.usuario == null}">
            <h3>No has iniciado sesión</h3>
            <div class="modal-buttons">
                <button id="cancelBtn">Cancelar</button>
                <button id="loginBtn">Ir al login</button>
            </div>
        </div>
    </div>
</div>

<div th:replace="fragments/footer :: footer"></div>

<script>
    const perfilBtn = document.getElementById('perfilBtn');
    const logoutModal = document.getElementById('logoutModal');
    const cancelBtn = document.querySelectorAll('#cancelBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const loginBtn = document.getElementById('loginBtn');

    perfilBtn.addEventListener('click', () => {
        logoutModal.style.display = 'flex';
    });

    cancelBtn.forEach(btn => {
        btn.addEventListener('click', () => {
            logoutModal.style.display = 'none';
        });
    });

    if (logoutBtn) {
        logoutBtn.addEventListener('click', () => {
            window.location.href = '/logout';
        });
    }

    if (loginBtn) {
        loginBtn.addEventListener('click', () => {
            window.location.href = '/login';
        });
    }

    window.addEventListener('click', (e) => {
        if (e.target === logoutModal) {
            logoutModal.style.display = 'none';
        }
    });
</script>
</body>
</html>
